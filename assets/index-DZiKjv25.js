const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CalculatorDisplay-CTZOoupw.js","assets/chakra-vendor-Cku2kjfL.js","assets/react-vendor-rh96jilU.js","assets/CalculatorKeypad-Csbrh7vr.js","assets/CalculatorHistory-CINiOQb7.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,r=(r,t,s)=>((r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s)(r,"symbol"!=typeof t?t+"":t,s);import{e as t,r as s,j as n,R as o,u as a,C as i,G as l,b as c,B as u,S as d,c as p}from"./chakra-vendor-Cku2kjfL.js";import{a as h}from"./react-vendor-rh96jilU.js";import{c as y,a as E}from"./math-vendor-C5oveify.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var g,m={};var f=function(){if(g)return m;g=1;var e=h();return m.createRoot=e.createRoot,m.hydrateRoot=e.hydrateRoot,m}();const x=t({config:{initialColorMode:"light",useSystemColorMode:!0},styles:{global:{body:{bg:"gray.50",color:"gray.800"}}}}),v={},C=function(e,r,t){let s=Promise.resolve();if(r&&r.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),n=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));s=e(r.map((e=>{if((e=function(e){return"/g-calculator/"+e}(e))in v)return;v[e]=!0;const r=e.endsWith(".css"),t=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const s=document.createElement("link");return s.rel=r?"stylesheet":"modulepreload",r||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),r?new Promise(((r,t)=>{s.addEventListener("load",r),s.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e}return s.then((r=>{for(const e of r||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},S=y(E),b=class e{constructor(){}static getInstance(){return e.instance||(e.instance=new e),e.instance}evaluate(e){try{const r=S.evaluate(e.toString());if("number"!=typeof r)throw new Error("Expression evaluation did not return a number");return r}catch(r){throw new Error(r instanceof Error?r.message:"Failed to evaluate expression")}}isValid(e){try{return S.parse(e.toString()),!0}catch{return!1}}formatNumber(e){return S.format(e,{precision:14})}};r(b,"instance");let _=b;class T{constructor(e=""){r(this,"tokens",[]),r(this,"adapter"),this.adapter=_.getInstance(),e&&(this.tokens=this.tokenize(e))}tokenize(e){return e.replace(/\s+/g,"").match(/(\d+\.?\d*|[+\-*/()^%]|sin|cos|tan|log|ln|sqrt|pi|e)/g)||[]}toString(){return this.tokens.join("")}isValid(){return this.adapter.isValid(this)}getTokens(){return[...this.tokens]}length(){return this.tokens.length}isEmpty(){return 0===this.tokens.length}getLastToken(){return this.tokens[this.tokens.length-1]||null}isLastTokenOperator(){const e=this.getLastToken();return!!e&&["+","-","*","/","^","%"].includes(e)}evaluate(){return this.adapter.evaluate(this)}}class k{constructor(e){r(this,"value"),r(this,"expression"),r(this,"timestamp"),r(this,"success"),r(this,"error"),this.value=e.value,this.expression=e.expression,this.timestamp=(new Date).toISOString(),this.success=e.success,this.error=e.error}static success(e,r){return new k({value:e,expression:r,success:!0})}static error(e,r){return new k({value:0,expression:e,success:!1,error:r})}}const I={currentExpression:"",result:null,history:[],isEngineeringMode:!1},O=new class{execute(e){try{const r=e.evaluate();return k.success(r,e.toString())}catch(r){return k.error(e.toString(),r instanceof Error?r.message:"Unknown error occurred")}}};function j(e=I,r){switch(r.type){case"APPEND_DIGIT":case"APPEND_OPERATOR":return{...e,currentExpression:e.currentExpression+r.payload,result:null};case"APPEND_FUNCTION":return{...e,currentExpression:e.currentExpression+r.payload+"(",result:null};case"CLEAR":return{...e,currentExpression:"",result:null};case"DELETE_LAST":return{...e,currentExpression:e.currentExpression.slice(0,-1),result:null};case"CALCULATE":{if(!e.currentExpression)return e;const r=new T(e.currentExpression),t=O.execute(r);return{...e,result:t,currentExpression:t.success?t.value.toString():e.currentExpression}}case"SET_RESULT":return{...e,result:r.payload};case"ADD_TO_HISTORY":return{...e,history:[...e.history,r.payload]};case"CLEAR_HISTORY":return{...e,history:[]};case"TOGGLE_ENGINEERING_MODE":return{...e,isEngineeringMode:!e.isEngineeringMode};default:return e}}const R=class e{saveHistory(r){try{const t=JSON.stringify(r);localStorage.setItem(e.HISTORY_KEY,t)}catch(t){}}loadHistory(){try{const r=localStorage.getItem(e.HISTORY_KEY);if(!r)return[];const t=JSON.parse(r);return Array.isArray(t)?t.slice(-e.MAX_HISTORY_ITEMS):[]}catch(r){return[]}}clearHistory(){try{localStorage.removeItem(e.HISTORY_KEY)}catch(r){}}};r(R,"HISTORY_KEY","calculator_history"),r(R,"MAX_HISTORY_ITEMS",100);let L=R;const w=s.createContext(null),A=new L;function P({children:e}){const[r,t]=s.useReducer(j,{currentExpression:"",result:null,history:A.loadHistory(),isEngineeringMode:!1});return r.result&&A.saveHistory([...r.history,r.result]),n.jsx(w.Provider,{value:{state:r,appendDigit:e=>{t({type:"APPEND_DIGIT",payload:e})},appendOperator:e=>{t({type:"APPEND_OPERATOR",payload:e})},appendFunction:e=>{t({type:"APPEND_FUNCTION",payload:e})},clear:()=>{t({type:"CLEAR"})},deleteLast:()=>{t({type:"DELETE_LAST"})},calculate:()=>{t({type:"CALCULATE"})},clearHistory:()=>{t({type:"CLEAR_HISTORY"}),A.clearHistory()},toggleEngineeringMode:()=>{t({type:"TOGGLE_ENGINEERING_MODE"})},selectHistoryItem:e=>{t({type:"SET_RESULT",payload:e})}},children:e})}const D=s.lazy((()=>C((()=>import("./CalculatorDisplay-CTZOoupw.js")),__vite__mapDeps([0,1,2])).then((e=>({default:e.CalculatorDisplay}))))),N=s.lazy((()=>C((()=>import("./CalculatorKeypad-Csbrh7vr.js")),__vite__mapDeps([3,1,2])).then((e=>({default:e.CalculatorKeypad}))))),H=s.lazy((()=>C((()=>import("./CalculatorHistory-CINiOQb7.js")),__vite__mapDeps([4,1,2])).then((e=>({default:e.CalculatorHistory}))))),M=o.memo((()=>{var e,r;const{state:t,appendDigit:o,appendOperator:p,appendFunction:h,clear:y,deleteLast:E,calculate:g,toggleEngineeringMode:m,clearHistory:f,selectHistoryItem:x}=function(){const e=s.useContext(w);if(!e)throw new Error("useCalculator must be used within a CalculatorProvider");return e}(),v=a("white","gray.800"),C=a("gray.200","gray.700"),S=s.useCallback((()=>{g(),setTimeout((()=>{window.dispatchEvent(new Event("storage"))}),0)}),[g]),b=s.useCallback((e=>{o(e)}),[o]),_=s.useCallback((e=>{p(e)}),[p]),T=s.useCallback((e=>{h(e)}),[h]),k=s.useCallback((()=>{y()}),[y]),I=s.useCallback((()=>{E()}),[E]),O=s.useCallback((()=>{m()}),[m]),j=s.useCallback((()=>{f()}),[f]),R=s.useCallback((e=>{x(e)}),[x]);return n.jsx(i,{maxW:"container.sm",py:8,children:n.jsxs(l,{templateColumns:{base:"1fr",md:"3fr 1fr"},gap:6,bg:v,borderRadius:"xl",boxShadow:"xl",overflow:"hidden",border:"1px solid",borderColor:C,children:[n.jsx(c,{children:n.jsxs(u,{p:4,children:[n.jsx(s.Suspense,{fallback:n.jsx(d,{}),children:n.jsx(D,{expression:t.currentExpression,result:(null==(e=t.result)?void 0:e.value.toString())??"",error:null==(r=t.result)?void 0:r.error})}),n.jsx(s.Suspense,{fallback:n.jsx(d,{}),children:n.jsx(N,{onDigitClick:b,onOperatorClick:_,onFunctionClick:T,onClear:k,onDelete:I,onCalculate:S,onToggleEngineeringMode:O,isEngineeringMode:t.isEngineeringMode})})]})}),n.jsx(c,{borderLeft:{base:"none",md:"1px solid"},borderTop:{base:"1px solid",md:"none"},borderColor:C,children:n.jsx(s.Suspense,{fallback:n.jsx(d,{}),children:n.jsx(H,{history:t.history,onClearHistory:j,onSelectHistoryItem:R})})})]})})}));function Y(){return n.jsx(p,{theme:x,children:n.jsx(P,{children:n.jsx(M,{})})})}M.displayName="Calculator",f.createRoot(document.getElementById("root")).render(n.jsx(s.StrictMode,{children:n.jsx(p,{theme:x,children:n.jsx(Y,{})})}));
